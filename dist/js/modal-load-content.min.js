!function(e, o, t){"use strict"; e.fn.modalLoadContent = function(n){var a = {debugMode:!1, overlayClass:".modal-load-content-overlay", containerClass:".modal-load-content-container", closeButtonClass:".modal-load-content-close", closeButtonIcon:"[Close]", closeButtonText:"Close modal", errorClass:"modal-load-content-error", errorText:"The requested page could not be loaded."}, s = e.extend({}, a, n), l = function(e, o){!0 === s.debugMode && console.log("modalLoadContent:", e + ":", o)}, r = function(o){return e(o).data("href") || e(o).attr("href")}, c = function(e){var o = e.replace(/[^a-zA-Z0-9]+/g, "-"); return{id:"#modal-load-content-" + o, text:"modal-load-content-" + o}}, d = function(){e(s.overlayClass).length || e("<div/>", {class:s.overlayClass.replace(".", "")}).appendTo("body")}, i = function(o){return e(o.id).length?(e(o.id).addClass("loaded"), o.id):(e("<div/>", {class:s.containerClass.replace(".", ""), id:o.text}).appendTo("body"), l("build", o.id), o.id)}, u = function(){var t, n, a, l, r, c, d; if (!e(s.containerClass).hasClass("opened"))return!1; t = s.containerClass + ".opened", e(t).removeAttr("style"), n = e(o).height(), a = e(o).width(), l = e(t).outerHeight(), r = e(t).outerWidth(), l >= n && (l = n - 30), r >= a && (r = a - 30), c = n / 2 - l / 2, d = a / 2 - r / 2, e(t).css("height", l).css("width", r).css("top", c).css("left", d)}, f = function(o){e(s.overlayClass).addClass("opened"), e(o).addClass("opened"), u(), l("opening", o)}, C = function(){var o = s.containerClass + ".opened"; e(o).removeClass("opened").removeAttr("style"), e(s.overlayClass).removeClass("opened"), l("closing", "modal")}, p = function(o, t, n, a){if (e(t).hasClass("loaded"))return a(t), !1; var r = [n, e(o).data("target") || ""]; n = r.join(" "), e(t).load(n, function(o, r, c){e("<span/>", {class:s.closeButtonClass.replace(".", ""), title:s.closeButtonText, text:s.closeButtonIcon}).appendTo(t), l("loaded from", n), "success" !== r && (e("<p/>", {text:s.errorText, class:s.errorClass}).appendTo(t), l("load error", c.status + " " + c.statusText)), a(o)})}, h = function(o){var t, n, a; return e(o).on("click", function(e){e.preventDefault(), d(), t = r(o), n = c(t), a = i(n), p(o, a, t, function(){f(a)})}), !1}, v = function(t){if (o.location.hash){var n = o.location.hash.substring(1); t.each(function(){r(e(this)) === n && e(this).click()})}return!1}, m = function(){e(t).on("keyup", function(e){27 === e.keyCode && C()}), e(t).on("click", s.overlayClass, C), e(t).on("click", s.closeButtonClass, C)}, g = function(){e(o).bind("resize", u)}; return function(e){return e.each(function(){h(this)}), v(e), g(), m(), e}(this)}}(jQuery, window, document);